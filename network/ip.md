# IP
- 单播（Unicast）地址：单播地址作为一个单一的接口标识符。IPv6数据包发送到一个单播地址被传递到由该地址标识的接口。对应于IPv4的普通公网和私网地址；
- 多播（MultiCast）地址：多播地址作为一组标识符，多播地址的行为/接口可能属于不同的节点集合。IPv6数据包发送到多播地址被传递到多个接口；
- 任播（AnyCast）地址：一组接口（一般属于不同节点）的标识符。发往任播地址的包被送给该地址标识的接口之一（路由协议度量距离最近的）。
## IPv4
32位二进制表示，分A、B、C、D、E五类网络
掩码表示:`192.168.0.1/20`，后面的20表示从高位开始前20位表示网络
`00000000.00000000.0000 0000.00000000`
- A类（最高位是0）： 0.0.0.0-127.255.255.255
- B类（最高位是10）： 128.0.0.0-191.255.255.255
- C类（前三位是110）： 192.0.0.0-233.255.255.255
- D类组播：1110
- E类预留：1111
- 私有IP：用到局域网中，是免费的有：
    A类：10.0.0.0-10.255.255.255
    B类：172.16.0.0-172.31.255.255
    C类：192.168.0.0-192.168.255.255
- 特殊ip
  - 0.0.0.0是此网络本身
  - 255.255.255.255是广播地址
#### IPv4 资源紧张的解决办法
- CIDR：解决ABCDE分类浪费的问题，提升空间有限
- NAT：做网络映射，复用IP，但应用场景受到限制，外网主动连接不方便
- IPv6：从根本上增加IP资源，但兼容性有问题
## IPv6
- 128位二进制表示,由八组、每组四位16进制数字组成，每组之间由":"来分隔，`2001:cdba:0000:0000:0000:0000:3257:9652`，简写
`2001:cdba:0:0:0:0:3257:9652（4个0简写成1个0)`
`2001:cdba::3257:9652(:0:0:0:0:简写成::,即省略所有的0)`
- Loopback:`::1`
- IPv4-compatible-IPv6,前面全零，使用最后32位,`::192.168.0.1（RFC4291中废弃)`
- IPv4-mapped-IPv6, 使用最后32位,33-40全1。`::FFFF:192.168.0.1` or `::C0A8:0001`
-  ::/128  即0:0:0:0:0:0:0:0，只能作为尚未获得正式地址的主机的源地址，不能作为目的地址，不能分配给真实的网络接口。
#### 常见IPv6地址
- ::1/128 即0:0:0:0:0:0:0:1，回环地址，相当于IPv4中的localhost（127.0.0.1），ping locahost可得到此地址。
-  2001::/16  全球可聚合地址，由 IANA 按地域和ISP进行分配，是最常用的IPv6地址，属于单播地址。
-  2002::/16  6 to 4 地址，用于6to4自动构造隧道技术的地址，属于单播地址。
-  3ffe::/16　 早期开始的IPv6 6bone试验网 地址，属于单播地址。
-  fe80::/10　 本地链路地址，用于单一链路，适用于自动配置、邻机发现等，路由器不转发以fe80开头的地址。
-  ff00::/8  组播地址。
-  ::A.B.C.D  兼容IPv4的IPv6地址，其中代表IPv4地址。自动将IPv6包以隧道方式在IPv4网络中传送的IPv4/IPv6节点将使用这些地址
-  ::FFFF:A.B.C.D　 是IPv4映射过来的IPv6地址，其中代表IPv4地址，例如 ::ffff:202.120.2.30 ，它是在不支持IPv6的网上用于表示IPv4节点。
#### 互通
在目前 IPv6和IPv4共存的情况下，实现V4和V6互联互通的综合组网技术和策略有：
1) 双栈策略
双栈策略是指在网元中同时具有 IPv4和IPv6两个协议栈，它既可以接收、处理、收发IPv4的分组，也可以接收、处理、收发IPv6的分组。
1) 隧道策略
隧道策略是 IPv4/v6综合组网技术中经常使用到的一种机制。所谓“隧道”，简单地讲就是利用一种协议来传输另一种协议的数据技术。隧道包括隧道入口和隧道出口（隧道终点），这些隧道端点通常都是双栈节点。在隧道入口以一种协议的形式来对另外一种协议数据进行封装，并发送。在隧道出口对接收到的协议数据解封装，并做相应的处理。在隧道的入口通常要维护一些与隧道相关的信息，如记录隧道MTU等参数。在隧道的出口通常出于安全性的考虑要对封装的数据进行过滤，以防止来自外部的恶意攻击。